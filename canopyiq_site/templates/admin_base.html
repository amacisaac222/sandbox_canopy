<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Admin{% endblock %} | CanopyIQ</title>
  <meta name="description" content="CanopyIQ Administration Panel">
  <link rel="icon" href="/static/canopy-logo-transparent.svg" type="image/svg+xml">
  <!-- Tailwind (CDN build for simplicity) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // CanopyIQ Brand Colors - New coral-pink and navy
            coral: {
              50: '#fff7f6',
              100: '#ffeeec',
              200: '#ffd9d4',
              300: '#ffb8ad',
              400: '#ff8f7d',
              500: '#ff6f61', // Primary coral-pink from logo
              600: '#f5553d',
              700: '#e0401f',
              800: '#c73314',
              900: '#a42e15',
            },
            navy: {
              50: '#f1f4f8',
              100: '#dde4ed',
              200: '#c0cedf',
              300: '#94abca',
              400: '#6182b0',
              500: '#3d6199',
              600: '#304e80',
              700: '#284069',
              800: '#253658',
              900: '#1c2a4a', // Primary dark navy from logo
            },
            // Technical grays for text hierarchy
            slate: {
              50: '#f8fafc',
              100: '#f1f5f9', 
              200: '#e2e8f0',
              300: '#cbd5e1',
              400: '#94a3b8',
              500: '#64748b',
              600: '#475569',
              700: '#334155',
              800: '#1e293b',
              900: '#0f172a',
            },
            // Accent colors
            accent: "#ff6f61",
            success: "#10b981",
            warn: "#f59e0b",
            danger: "#ef4444",
            // Main theme colors
            primary: "#1c2a4a",
            secondary: "#ff6f61",
          },
          fontFamily: {
            sans: ['Nunito', 'Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
            mono: ['JetBrains Mono', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'],
          },
          backgroundImage: {
            'gradient-brand': 'linear-gradient(135deg, #1c2a4a 0%, #253658 50%, #ff6f61 100%)',
            'gradient-coral': 'linear-gradient(135deg, #ff6f61 0%, #f5553d 100%)',
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-navy-50 text-navy-900 antialiased min-h-screen">
  <!-- Admin Header -->
  <header class="bg-navy-900 text-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <a href="/admin/mcp" class="flex items-center gap-2">
            <img src="/static/canopy-logo-transparent.svg" alt="CanopyIQ logo" class="h-8 w-8">
            <div>
              <div class="font-black text-lg">CanopyIQ Admin</div>
              <div class="text-xs text-navy-300">Administration Panel</div>
            </div>
          </a>
        </div>
        <div class="flex items-center gap-4">
          <div class="text-sm text-navy-300 font-semibold">
            {{ user.name if user else "Admin" }}
          </div>
          <a href="/" class="text-navy-300 hover:text-coral-500 transition text-sm font-semibold">‚Üê Back to Site</a>
          <a href="/auth/logout" class="text-coral-400 hover:text-coral-300 transition text-sm font-bold">Sign Out</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Admin Navigation -->
  <nav class="bg-white border-b border-navy-200">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex space-x-8">
        <a href="/admin/dashboard" class="border-b-2 border-transparent hover:border-coral-500 transition-colors px-1 py-4 text-sm font-bold text-navy-900 hover:text-coral-500 {% if '/admin/dashboard' in request.url.path %}border-coral-500 text-coral-500{% endif %}">
          AI Governance
        </a>
        <a href="/admin/mcp" class="border-b-2 border-transparent hover:border-coral-500 transition-colors px-1 py-4 text-sm font-semibold text-navy-600 hover:text-coral-500 {% if '/admin/mcp' in request.url.path %}border-coral-500 text-coral-500{% endif %}">
          Setup
        </a>
        <a href="/admin/audit" class="border-b-2 border-transparent hover:border-coral-500 transition-colors px-1 py-4 text-sm font-semibold text-navy-600 hover:text-coral-500 {% if '/admin/audit' in request.url.path %}border-coral-500 text-coral-500{% endif %}">
          Activity Log
        </a>
        <a href="/admin/context" class="border-b-2 border-transparent hover:border-coral-500 transition-colors px-1 py-4 text-sm font-semibold text-navy-600 hover:text-coral-500 {% if '/admin/context' in request.url.path %}border-coral-500 text-coral-500{% endif %}">
          Context Memory
        </a>
        <a href="/admin/submissions" class="border-b-2 border-transparent hover:border-coral-500 transition-colors px-1 py-4 text-sm font-semibold text-navy-600 hover:text-coral-500 {% if '/admin/submissions' in request.url.path %}border-coral-500 text-coral-500{% endif %}">
          Support
        </a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 py-8">
    {% block content %}{% endblock %}
  </main>

  <!-- Toast Notifications -->
  <div id="toast-container" class="fixed bottom-4 right-4 space-y-2 z-50">
    <!-- Toasts will be inserted here -->
  </div>

  <!-- Common JavaScript -->
  <script>
    // Toast notification system
    function showToast(message, type = 'info') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      const colors = {
        success: 'bg-green-500',
        error: 'bg-red-500', 
        warning: 'bg-yellow-500',
        info: 'bg-blue-500'
      };
      
      toast.className = `${colors[type]} text-white px-4 py-2 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300`;
      toast.textContent = message;
      
      container.appendChild(toast);
      
      // Slide in
      setTimeout(() => toast.classList.remove('translate-x-full'), 100);
      
      // Remove after 5 seconds
      setTimeout(() => {
        toast.classList.add('translate-x-full');
        setTimeout(() => container.removeChild(toast), 300);
      }, 5000);
    }

    // Loading state helper
    function setButtonLoading(button, loading) {
      if (loading) {
        button.disabled = true;
        button.dataset.originalText = button.textContent;
        button.textContent = 'Loading...';
      } else {
        button.disabled = false;
        button.textContent = button.dataset.originalText;
      }
    }

    // CSRF token helper (if needed)
    function getCsrfToken() {
      return document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
    }
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>