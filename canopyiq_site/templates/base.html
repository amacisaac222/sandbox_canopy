<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ meta.title }}</title>
  <meta name="description" content="{{ meta.desc }}">
  <link rel="icon" href="/static/canopy-logo.png" type="image/png">
  <!-- Tailwind (CDN build for simplicity) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // CanopyIQ Brand Colors - New coral-pink and navy
            coral: {
              50: '#fff7f6',
              100: '#ffeeec',
              200: '#ffd9d4',
              300: '#ffb8ad',
              400: '#ff8f7d',
              500: '#ff6f61', // Primary coral-pink from logo
              600: '#f5553d',
              700: '#e0401f',
              800: '#c73314',
              900: '#a42e15',
            },
            navy: {
              50: '#f1f4f8',
              100: '#dde4ed',
              200: '#c0cedf',
              300: '#94abca',
              400: '#6182b0',
              500: '#3d6199',
              600: '#304e80',
              700: '#284069',
              800: '#253658',
              900: '#1c2a4a', // Primary dark navy from logo
            },
            // Technical grays for text hierarchy
            slate: {
              50: '#f8fafc',
              100: '#f1f5f9', 
              200: '#e2e8f0',
              300: '#cbd5e1',
              400: '#94a3b8',
              500: '#64748b',
              600: '#475569',
              700: '#334155',
              800: '#1e293b',
              900: '#0f172a',
            },
            // Accent colors
            accent: "#ff6f61",
            success: "#10b981",
            warn: "#f59e0b",
            danger: "#ef4444",
            // Main theme colors
            primary: "#1c2a4a",
            secondary: "#ff6f61",
          },
          fontFamily: {
            sans: ['Nunito', 'Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
            mono: ['JetBrains Mono', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'],
          },
          backgroundImage: {
            'gradient-brand': 'linear-gradient(135deg, #1c2a4a 0%, #253658 50%, #ff6f61 100%)',
            'gradient-coral': 'linear-gradient(135deg, #ff6f61 0%, #f5553d 100%)',
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <meta property="og:title" content="{{ meta.title }}">
  <meta property="og:description" content="{{ meta.desc }}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://canopyiq.ai{{ meta.url_path }}">
  <meta property="og:image" content="https://canopyiq.ai/static/og.svg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ meta.title }}">
  <meta name="twitter:description" content="{{ meta.desc }}">
  <meta name="twitter:image" content="https://canopyiq.ai/static/og.svg">
  
  <!-- Chart.js for beautiful data visualization -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
</head>
<body class="bg-navy-900 text-white antialiased font-sans">
  <a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-coral-500 text-navy-900 px-3 py-2 rounded">Skip to content</a>

  <!-- Header -->
  <header class="sticky top-0 z-50 bg-navy-900/95 backdrop-blur border-b border-navy-800">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="/" class="flex items-center gap-3">
        <img src="/static/canopy-logo-with-text.svg?v={{ asset_ver }}" alt="CanopyIQ logo" class="h-10">
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm font-semibold">
        {% if request.url.path != '/' %}
          <a class="text-coral-500 hover:text-coral-400 transition-colors font-bold" href="/">← Home</a>
        {% endif %}
        <a class="text-navy-200 hover:text-coral-500 transition-colors" href="/documentation">Docs</a>
        <a class="text-navy-200 hover:text-coral-500 transition-colors" href="/faq">FAQ</a>
        <a class="text-navy-200 hover:text-coral-500 transition-colors" href="/contact">Contact</a>
        
        {% if user %}
          <!-- Authenticated user menu -->
          <div class="flex items-center gap-3 ml-2 pl-2 border-l border-navy-700">
            <span class="text-navy-300 text-xs font-semibold">{{ user.name }}</span>
            <a href="/dashboard" class="text-coral-500 hover:text-coral-400 transition-colors text-xs font-bold" title="Your Dashboard">Dashboard</a>
            {% if user.is_admin() %}
              <a href="/admin" class="text-blue-400 hover:text-blue-300 transition-colors text-xs font-bold" title="Admin Panel">Admin</a>
            {% endif %}
            <a href="/auth/logout" class="inline-flex items-center rounded border border-navy-700 text-navy-200 px-3 py-1.5 hover:bg-navy-800 hover:text-white transition text-xs font-semibold">Sign Out</a>
          </div>
        {% else %}
          <!-- Unauthenticated menu -->
          <div class="flex items-center gap-3 ml-2">
            <a href="/auth/login" class="inline-flex items-center rounded border border-navy-700 text-navy-200 px-3 py-1.5 hover:bg-navy-800 hover:text-white transition text-xs font-semibold">Sign In</a>
            <a href="/signup" class="inline-flex items-center rounded bg-gradient-coral text-white px-4 py-2 hover:opacity-90 transition font-bold text-xs">Sign Up</a>
          </div>
        {% endif %}
      </nav>
      <button id="mnav" class="md:hidden inline-flex items-center p-2 rounded border border-navy-700 text-navy-200" aria-label="Menu">
        <svg width="20" height="20" fill="none" stroke="currentColor"><path d="M3 6h14M3 12h14M3 18h14"/></svg>
      </button>
    </div>
    <div id="mnav-panel" class="hidden md:hidden border-t border-navy-800 px-4 pb-3 bg-navy-900">
      <div class="flex flex-col gap-3 pt-3 text-sm font-semibold">
        {% if request.url.path != '/' %}
          <a class="text-coral-500 hover:text-coral-400 transition-colors font-bold" href="/">← Home</a>
        {% endif %}
        <a class="text-navy-200 hover:text-coral-500 transition-colors" href="/documentation">Docs</a>
        <a class="text-navy-200 hover:text-coral-500 transition-colors" href="/faq">FAQ</a>
        <a class="text-navy-200 hover:text-coral-500 transition-colors" href="/contact">Contact</a>
        
        {% if user %}
          <!-- Authenticated mobile menu -->
          <div class="pt-2 border-t border-navy-800 flex flex-col gap-3">
            <div class="text-navy-300 text-xs font-semibold">Signed in as {{ user.name }}</div>
            <a class="text-coral-500 hover:text-coral-400 transition-colors font-bold" href="/dashboard">Your Dashboard</a>
            {% if user.is_admin() %}
              <a class="text-blue-400 hover:text-blue-300 transition-colors font-bold" href="/admin">Admin Panel</a>
            {% endif %}
            <a href="/auth/logout" class="inline-flex items-center rounded border border-navy-700 text-navy-200 px-3 py-2 w-max hover:bg-navy-800 hover:text-white transition text-xs font-semibold">Sign Out</a>
          </div>
        {% else %}
          <!-- Unauthenticated mobile menu -->
          <div class="pt-2 border-t border-navy-800 flex flex-col gap-3">
            <a href="/auth/login" class="inline-flex items-center rounded border border-navy-700 text-navy-200 px-3 py-2 w-max hover:bg-navy-800 hover:text-white transition text-xs font-semibold">Sign In</a>
            <a href="/signup" class="inline-flex items-center rounded bg-gradient-coral text-white px-4 py-2 w-max hover:opacity-90 transition font-bold">Sign Up</a>
          </div>
        {% endif %}
      </div>
    </div>
  </header>

  <main id="main" class="min-h-[70vh]">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="border-t border-navy-800 bg-navy-900">
    <div class="max-w-7xl mx-auto px-4 py-10 grid gap-8 md:grid-cols-4">
      <div class="space-y-3">
        <div class="flex items-center gap-3">
          <img src="/static/canopy-logo-with-text.svg?v={{ asset_ver }}" alt="" class="h-8">
        </div>
        <p class="text-sm text-navy-300 font-semibold">AI Agent Runtime Security</p>
      </div>
      <div>
        <div class="font-bold mb-3 text-white">Product</div>
        <ul class="space-y-2 text-sm">
          <li><a class="text-navy-300 hover:text-coral-500 transition-colors font-semibold" href="/documentation">Docs</a></li>
        </ul>
      </div>
      <div>
        <div class="font-bold mb-3 text-white">Company</div>
        <ul class="space-y-2 text-sm">
          <li><a class="text-navy-300 hover:text-coral-500 transition-colors font-semibold" href="/contact">Contact</a></li>
          <li><a class="text-navy-300 hover:text-coral-500 transition-colors font-semibold" href="/faq">FAQ</a></li>
          <li><a class="text-navy-300 hover:text-coral-500 transition-colors font-semibold" href="/terms">Terms</a></li>
          <li><a class="text-navy-300 hover:text-coral-500 transition-colors font-semibold" href="/privacy">Privacy</a></li>
        </ul>
      </div>
      <div>
        <div class="font-bold mb-3 text-white">Stay Updated</div>
        <form class="flex gap-2">
          <input class="border border-navy-700 rounded px-3 py-2 text-sm w-full bg-navy-800 text-navy-200 placeholder-navy-400 font-semibold" placeholder="you@company.com" disabled>
          <button class="bg-coral-500 text-white rounded px-3 py-2 text-sm font-bold" disabled>Soon</button>
        </form>
      </div>
    </div>
    <div class="text-xs text-center text-navy-400 py-4 border-t border-navy-800 font-semibold">© {{ 2025 }} CanopyIQ — All rights reserved.</div>
  </footer>

  <script>
    const btn = document.getElementById('mnav');
    const panel = document.getElementById('mnav-panel');
    if (btn && panel) btn.onclick = () => panel.classList.toggle('hidden');
  </script>
</body>
</html>